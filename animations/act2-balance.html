<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drone Center of Gravity Balance Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #fafafa;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            padding: 40px;
            max-width: 900px;
            width: 100%;
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
            border: 2px solid #d0d0d0;
        }
        
        h1 {
            color: #0a0a0a;
            text-align: center;
            margin-bottom: 10px;
            font-size: 32px;
            font-weight: 400;
        }
        
        .subtitle {
            text-align: center;
            color: #3a3a3a;
            margin-bottom: 30px;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .demo-area {
            background: #f5f5f5;
            padding: 60px 40px;
            margin-bottom: 30px;
            position: relative;
            min-height: 450px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid #9a9a9a;
        }
        
        .drone-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            height: 350px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.5s ease-out;
            transform-origin: center;
        }
        
        svg {
            width: 100%;
            height: 100%;
            max-width: 400px;
            max-height: 300px;
        }
        
        .battery-indicator {
            position: absolute;
            width: 30px;
            height: 50px;
            background: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            font-size: 10px;
            transition: all 0.3s;
            opacity: 0;
            z-index: 15;
            top: 50%;
            transform: translateY(-50%);
            border: 2px solid #000000;
        }
        
        .battery-indicator.left {
            left: -80px;
        }
        
        .battery-indicator.right {
            right: -80px;
        }
        
        .battery-indicator.active {
            opacity: 1;
        }
        
        .battery-label {
            writing-mode: vertical-rl;
            transform: rotate(180deg);
            white-space: nowrap;
            font-size: 9px;
        }
        
        .support-point {
            position: absolute;
            width: 40px;
            height: 50px;
            bottom: 20px;
            background: #6a6a6a;
            border: 3px solid #3a3a3a;
            transition: left 0.5s ease;
            box-shadow: 0 -3px 10px rgba(0,0,0,0.2);
            z-index: 8;
            left: calc(50% - 20px);
        }
        
        .balance-indicator {
            text-align: center;
            padding: 20px;
            background: #f0f0f0;
            color: #0a0a0a;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 30px;
            transition: all 0.3s;
            border: 2px solid #1a1a1a;
        }
        
        .balance-indicator.unbalanced {
            background: #3a3a3a;
            color: white;
            border-color: #000000;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .control-section {
            background: #f5f5f5;
            padding: 20px;
            border: 1px solid #d0d0d0;
        }
        
        .control-title {
            font-weight: 600;
            color: #0a0a0a;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            flex: 1;
            padding: 12px 20px;
            background: #1a1a1a;
            color: white;
            border: 2px solid #1a1a1a;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 80px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            background: #000000;
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-danger {
            background: white;
            color: #0a0a0a;
            border-color: #1a1a1a;
        }
        
        .btn-danger:hover {
            background: #f0f0f0;
        }
        
        .btn-success {
            background: #1a1a1a;
            color: white;
            border-color: #1a1a1a;
        }
        
        .btn-success:hover {
            background: #000000;
        }
        
        .slider-container {
            margin-top: 15px;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #1a1a1a;
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #1a1a1a;
            cursor: pointer;
            border: none;
        }
        
        .info-box {
            background: #f0f0f0;
            border-left: 5px solid #6a6a6a;
            padding: 20px;
        }
        
        .info-title {
            font-weight: 600;
            color: #0a0a0a;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .info-text {
            color: #3a3a3a;
            line-height: 1.6;
        }
        
        .drone-connection {
            background: #f5f5f5;
            border-left: 5px solid #1a1a1a;
            padding: 20px;
            border: 1px solid #d0d0d0;
        }
        
        .drone-title {
            font-weight: 600;
            color: #0a0a0a;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .drone-text {
            color: #3a3a3a;
            line-height: 1.6;
        }
        
        /* --- Animation --- */
        @keyframes rotateClockwise {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        @keyframes rotateCounter {
          from { transform: rotate(0deg); }
          to { transform: rotate(-360deg); }
        }

        .propeller {
          animation-duration: 0.6s;
          animation-timing-function: linear;
          animation-iteration-count: infinite;
        }

        /* ✅ Each propeller rotates around its own center (SVG coords) and alternates direction */
        #prop1 {
          transform-origin: 80px 75px;
          animation-name: rotateClockwise;
        }

        #prop2 {
          transform-origin: 320px 75px;
          animation-name: rotateCounter;
        }

        #prop3 {
          transform-origin: 80px 275px;
          animation-name: rotateCounter;
        }

        #prop4 {
          transform-origin: 320px 275px;
          animation-name: rotateClockwise;
        }
        
        @media (max-width: 768px) {
            .controls {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 25px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .demo-area {
                padding: 40px 20px;
                min-height: 400px;
            }
            
            .battery-indicator {
                width: 25px;
                height: 40px;
                font-size: 9px;
            }
            
            .battery-indicator.left {
                left: -60px;
            }
            
            .battery-indicator.right {
                right: -60px;
            }
            
            .info-text, .drone-text {
                font-size: 14px;
            }
            
            .control-title, .info-title, .drone-title {
                font-size: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 20px;
            }
            
            .subtitle {
                font-size: 14px;
            }
            
            .demo-area {
                padding: 30px 15px;
                min-height: 350px;
            }
            
            .battery-indicator {
                width: 22px;
                height: 35px;
                font-size: 8px;
            }
            
            .battery-indicator.left {
                left: -50px;
            }
            
            .battery-indicator.right {
                right: -50px;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 12px;
                min-width: 70px;
            }
            
            .balance-indicator {
                font-size: 18px;
                padding: 15px;
            }
            
            .info-box, .drone-connection {
                padding: 15px;
            }
            
            .info-text, .drone-text {
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🚁 Drone Balance Challenge</h1>
        <p class="subtitle">Learn about center of gravity with quadcopters</p>
        
        <div class="info-box">
            <div class="info-title">📖 How It Works:</div>
            <div class="info-text">
                • Balance a drone on a support point<br>
                • Add batteries to one side - it tilts!<br>
                • Move the support point to find the new balance<br>
                • The heavier one side is, the more you adjust!
            </div>
        </div>
        
        <div class="balance-indicator" id="balanceStatus">
            ✅ BALANCED
        </div>
        
        <div class="demo-area">
            <div class="drone-container" id="droneContainer">
                <svg viewBox="0 0 400 350" xmlns="http://www.w3.org/2000/svg">
                    <g id="droneBody">
                        <rect x="175" y="160" width="50" height="50" rx="8" fill="#2c3e50" stroke="#000" stroke-width="2"/>
                        
                        <line x1="185" y1="210" x2="160" y2="240" stroke="#34495e" stroke-width="3"/>
                        <line x1="215" y1="210" x2="240" y2="240" stroke="#34495e" stroke-width="3"/>
                        <line x1="190" y1="210" x2="165" y2="245" stroke="#34495e" stroke-width="3"/>
                        <line x1="210" y1="210" x2="235" y2="245" stroke="#34495e" stroke-width="3"/>
                        
                        <circle cx="195" cy="163" r="4" fill="#e74c3c"/>
                        
                        <line x1="180" y1="175" x2="80" y2="75" stroke="#34495e" stroke-width="6" stroke-linecap="round"/>
                        
                        <line x1="220" y1="175" x2="320" y2="75" stroke="#34495e" stroke-width="6" stroke-linecap="round"/>
                        
                        <line x1="180" y1="195" x2="80" y2="275" stroke="#34495e" stroke-width="6" stroke-linecap="round"/>
                        
                        <line x1="220" y1="195" x2="320" y2="275" stroke="#34495e" stroke-width="6" stroke-linecap="round"/>
                        
                        <circle cx="80" cy="75" r="8" fill="#7f8c8d" stroke="#000" stroke-width="1"/>
                        <circle cx="320" cy="75" r="8" fill="#7f8c8d" stroke="#000" stroke-width="1"/>
                        <circle cx="80" cy="275" r="8" fill="#7f8c8d" stroke="#000" stroke-width="1"/>
                        <circle cx="320" cy="275" r="8" fill="#7f8c8d" stroke="#000" stroke-width="1"/>
                    </g>
                    
                    <g class="propeller" id="prop1">
                        <ellipse cx="80" cy="75" rx="25" ry="8" fill="#ff9800" opacity="0.8"/>
                        <ellipse cx="80" cy="75" rx="8" ry="25" fill="#ff9800" opacity="0.8"/>
                        <circle cx="80" cy="75" r="6" fill="#f57c00"/>
                    </g>
                    
                    <g class="propeller" id="prop2">
                        <ellipse cx="320" cy="75" rx="25" ry="8" fill="#ffa726" opacity="0.8"/>
                        <ellipse cx="320" cy="75" rx="8" ry="25" fill="#ffa726" opacity="0.8"/>
                        <circle cx="320" cy="75" r="6" fill="#f57c00"/>
                    </g>
                    
                    <g class="propeller" id="prop3">
                        <ellipse cx="80" cy="275" rx="25" ry="8" fill="#ffb74d" opacity="0.8"/>
                        <ellipse cx="80" cy="275" rx="8" ry="25" fill="#ffb74d" opacity="0.8"/>
                        <circle cx="80" cy="275" r="6" fill="#f57c00"/>
                    </g>
                    
                    <g class="propeller" id="prop4">
                        <ellipse cx="320" cy="275" rx="25" ry="8" fill="#ff9800" opacity="0.8"/>
                        <ellipse cx="320" cy="275" rx="8" ry="25" fill="#ff9800" opacity="0.8"/>
                        <circle cx="320" cy="275" r="6" fill="#f57c00"/>
                    </g>
                </svg>
                
                <div class="battery-indicator left" id="batteryLeft">
                    <div class="battery-label" id="leftLabel">0g</div>
                </div>
                <div class="battery-indicator right" id="batteryRight">
                    <div class="battery-label" id="rightLabel">0g</div>
                </div>
                <div class="support-point" id="supportPoint"></div>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-section">
                <div class="control-title">🔴 Add Battery to Left</div>
                <div class="btn-group">
                    <button class="btn" onclick="addWeight('left', 50)">+50g</button>
                    <button class="btn" onclick="addWeight('left', 100)">+100g</button>
                    <button class="btn" onclick="addWeight('left', 200)">+200g</button>
                </div>
            </div>
            
            <div class="control-section">
                <div class="control-title">🔵 Add Battery to Right</div>
                <div class="btn-group">
                    <button class="btn" onclick="addWeight('right', 50)">+50g</button>
                    <button class="btn" onclick="addWeight('right', 100)">+100g</button>
                    <button class="btn" onclick="addWeight('right', 200)">+200g</button>
                </div>
            </div>
        </div>
        
        <div class="control-section" style="margin-bottom: 20px;">
            <div class="control-title">👆 Move Support Point to Balance</div>
            <div class="slider-container">
                <input type="range" min="0" max="100" value="50" class="slider" id="fingerSlider" oninput="moveFinger(this.value)">
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 10px; color: #666; font-size: 14px;">
                <span>← Left</span>
                <span>Center</span>
                <span>Right →</span>
            </div>
        </div>
        
        <div style="text-align: center; margin-bottom: 20px;">
            <button class="btn btn-danger" onclick="reset()">🔄 Reset</button>
            <button class="btn btn-success" onclick="autoBalance()">✨ Auto Balance</button>
        </div>
        
        <div class="drone-connection">
            <div class="drone-title">🚁 Why This Matters:</div>
            <div class="drone-text">
                Real quadcopter drones must have perfectly balanced weight distribution to fly safely and smoothly! Engineers carefully place the battery, camera, and flight controller so the center of gravity stays centered. If batteries are too far to one side, the drone tilts and becomes unstable. By optimizing component placement, designers ensure stable, efficient flight!
            </div>
        </div>
    </div>
    
    <script>
        let leftWeight = 0;
        let rightWeight = 0;
        let supportPosition = 50;
        
        function addWeight(side, amount) {
            if (side === 'left') {
                leftWeight += amount;
                document.getElementById('batteryLeft').classList.add('active');
                document.getElementById('leftLabel').textContent = leftWeight + 'g';
            } else {
                rightWeight += amount;
                document.getElementById('batteryRight').classList.add('active');
                document.getElementById('rightLabel').textContent = rightWeight + 'g';
            }
            updateBalance();
        }
        
        function moveFinger(value) {
            supportPosition = parseInt(value);
            const supportPoint = document.getElementById('supportPoint');
            const percentage = supportPosition;
            supportPoint.style.left = `calc(${percentage}% - 20px)`;
            updateBalance();
        }
        
        function updateBalance() {
            const droneContainer = document.getElementById('droneContainer');
            const balanceStatus = document.getElementById('balanceStatus');
            
            // Assuming the core drone body has a default weight that is centered.
            const totalWeight = leftWeight + rightWeight;
            let idealPosition = 50;
            
            if (totalWeight > 0) {
                // Calculation for the center of gravity (CoG) relative to the center (50)
                // The factor '30' scales the shift to fit the visual range (0 to 100 slider range)
                const weightDifference = rightWeight - leftWeight;
                idealPosition = 50 + (weightDifference / totalWeight) * 30;
            }
            
            const tolerance = 5; // A 5% tolerance for visual "balance"
            const isBalanced = Math.abs(supportPosition - idealPosition) < tolerance;
            
            if (isBalanced || (leftWeight === 0 && rightWeight === 0)) {
                droneContainer.style.transform = 'rotate(0deg)';
                balanceStatus.textContent = '✅ BALANCED';
                balanceStatus.className = 'balance-indicator';
            } else {
                // Tilt the drone based on the distance between the support point and the true CoG
                const tiltAmount = (idealPosition - supportPosition) * 0.5;
                droneContainer.style.transform = `rotate(${tiltAmount}deg)`;
                balanceStatus.textContent = '❌ UNBALANCED - Move support point!';
                balanceStatus.className = 'balance-indicator unbalanced';
            }
        }
        
        function autoBalance() {
            const totalWeight = leftWeight + rightWeight;
            if (totalWeight === 0) {
                supportPosition = 50;
            } else {
                const weightDifference = rightWeight - leftWeight;
                supportPosition = 50 + (weightDifference / totalWeight) * 30;
            }
            
            document.getElementById('fingerSlider').value = supportPosition;
            moveFinger(supportPosition);
        }
        
        function reset() {
            leftWeight = 0;
            rightWeight = 0;
            supportPosition = 50;
            
            document.getElementById('batteryLeft').classList.remove('active');
            document.getElementById('batteryRight').classList.remove('active');
            document.getElementById('leftLabel').textContent = '0g';
            document.getElementById('rightLabel').textContent = '0g';
            document.getElementById('fingerSlider').value = 50;
            
            moveFinger(50);
            updateBalance();
        }
        
        // Initialize positions
        moveFinger(50);
        updateBalance();
    </script>
</body>
</html>